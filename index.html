<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>LOH WEI JIAN - Portfolio</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
<style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #0a1929 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Enhanced Navigation - Modern Hide/Show */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: transparent;
            backdrop-filter: none;
            z-index: 1000;
            padding: 2rem 0;
            transform: translateY(0);
            opacity: 1;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        nav.scrolled {
            background: rgba(26, 26, 46, 0.95);
            backdrop-filter: blur(20px);
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        nav.nav-hidden {
            transform: translateY(-100%);
            opacity: 0;
        }

        nav .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        nav.scrolled .logo {
            font-size: 1.5rem;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2.5rem;
        }

        .nav-links a {
            text-decoration: none;
            color: rgba(255, 255, 255, 0.9);
            transition: all 0.3s ease;
            cursor: pointer;
            font-weight: 500;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            position: relative;
            padding: 0.5rem 0;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        .nav-links a:hover {
            color: white;
            transform: translateY(-2px);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* Hero Section */
        .hero {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #0a1929 100%);
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(102, 126, 234, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 80% 80%, rgba(118, 75, 162, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.05) 0%, transparent 60%);
            animation: float 8s ease-in-out infinite;
        }

        .hero::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.03)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.3;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(1deg); }
        }

        .hero-content {
            z-index: 2;
            animation: fadeInUp 1s ease;
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .hero-text {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .hero-text .cta-button { margin-top: 0.25rem; }

        @media (min-width: 992px) {
            .hero-content {
                display: grid;
                grid-template-columns: 1fr 1fr;
                align-items: center;
                gap: 4rem;
                text-align: center;
                height: 100%;
            }
            .profile-portrait { order: 2; margin: 0; align-self: end; height: 100vh; }
            .hero-text { 
                order: 1; 
                align-items: center; 
                text-align: center; 
                transform: translateX(15%);
                position: relative;
            }
        }

        /* Profile portrait (frameless, waist-up crop) */
        .profile-portrait {
            width: clamp(240px, 34vw, 560px);
            aspect-ratio: 3 / 4;
            margin: 0 auto 1.8rem;
            overflow: hidden;
            border-radius: 16px;
            filter: drop-shadow(0 22px 50px rgba(0, 0, 0, 0.45));
            animation: fadeInUp 0.9s ease both;
            background: transparent;
        }

        .profile-portrait img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center 18%; /* focus on face/chest; trims legs */
            transform: scale(1.14);
            will-change: transform;
        }

        .hero h1 {
            font-size: 4.5rem;
            margin-bottom: 1.5rem;
            font-weight: 900;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            letter-spacing: -0.02em;
            background: linear-gradient(135deg, #ffffff 0%, #e0e7ff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            white-space: nowrap;
        }

        .hero p {
            font-size: 1.6rem;
            margin-bottom: 2.5rem;
            opacity: 0.95;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            font-weight: 300;
            letter-spacing: 0.02em;
        }

        .cta-button {
            display: inline-block;
            padding: 18px 40px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.05) 100%);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: transform;
            cursor: pointer;
            backdrop-filter: blur(15px);
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
            font-weight: 500;
            font-size: 1.1rem;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .cta-button:hover {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%);
            color: #1a1a2e;
            transform: translateY(-4px) scale(1.02);
            border-color: rgba(255, 255, 255, 0.9);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        .cta-button:hover::before {
            left: 100%;
        }

        /* Sections - Always visible by default */
        .section {
            padding: 80px 20px;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            margin: 3rem 0;
            border-radius: 25px;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.15);
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.8s ease, transform 0.8s ease;
            border: 1px solid rgba(255, 255, 255, 0.8);
            position: relative;
            overflow: hidden;
        }



        /* Animated elements - visible by default, animate on scroll */
        .animate-on-scroll {
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .animate-on-scroll.fade-up {
            transform: translateY(0);
        }

        .animate-on-scroll.fade-left {
            transform: translateX(0);
        }

        .animate-on-scroll.fade-right {
            transform: translateX(0);
        }

        .animate-on-scroll.scale {
            transform: scale(1);
        }

        .animate-on-scroll.rotate {
            transform: rotate(0deg) translateY(0);
        }

        /* Hidden state for animation */
        .animate-on-scroll.hidden.fade-up {
            opacity: 0;
            transform: translateY(40px);
        }

        .animate-on-scroll.hidden.fade-left {
            opacity: 0;
            transform: translateX(-40px);
        }

        .animate-on-scroll.hidden.fade-right {
            opacity: 0;
            transform: translateX(40px);
        }

        .animate-on-scroll.hidden.scale {
            opacity: 0;
            transform: scale(0.8);
        }

        .animate-on-scroll.hidden.rotate {
            opacity: 0;
            transform: rotate(-5deg) translateY(20px);
        }

        .section h2 {
            text-align: center;
            font-size: 2.8rem;
            margin-bottom: 3.5rem;
            color: #1a1a2e;
            position: relative;
            font-weight: 300;
            letter-spacing: -0.02em;
        }

        .section h2::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 2px;
        }

        .section h2::before {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.3), transparent);
        }

        /* Combined Education & Projects Section */
        .education-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 3rem;
            border-radius: 20px;
            text-align: center;
            margin: 0 1.5rem 4rem 1.5rem;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
        }

        .education-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .education-header h3 {
            font-size: 1.8rem;
            margin-bottom: 1rem;
        }

        .education-header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Project Items - Alternating Layout with Responsive Heights */
        .projects-container {
            padding: 0 1.5rem;
        }

        .project-item {
            display: flex;
            align-items: center;
            gap: 1.2rem;
            margin-bottom: 1.5rem;
        }

        .project-item.project-left {
            flex-direction: row-reverse;
        }

        .project-content {
            flex: 1;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
        }

        .project-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 0 0 4px 4px;
        }

        .project-image {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-radius: 15px;
            background: white;
            padding: 6px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        /* Specific sizing for different poster ratios */
        .project-item:nth-child(1) .project-image {
            aspect-ratio: 2245/3179;
        }

        .project-item:nth-child(2) .project-image {
            aspect-ratio: 3456/4608;
        }

        .project-item:nth-child(3) .project-image {
            aspect-ratio: 1587/2245;
        }

        .project-image img {
            width: 100%;
            height: auto;
            object-fit: unset;
            object-position: center;
        }

        .project-image:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
        }

        .project-content h3 {
            color: #333;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .project-content p {
            color: #666;
            margin-bottom: 1rem;
            line-height: 1.7;
        }

        .project-content .date {
            color: #999;
            font-size: 0.9rem;
            font-style: italic;
            margin-top: auto;
        }

        /* Grid layouts for other sections */
        .grid {
            display: grid;
            gap: 2.5rem;
            margin: 3rem 1.5rem 0 1.5rem;
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .grid-3 {
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        }

        /* Cards */
        .card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            will-change: transform;
            border: 1px solid rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 20px 20px 0 0;
        }

        .card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.15);
        }

        .card h3 {
            color: #333;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .card p {
            color: #666;
            margin-bottom: 1rem;
        }

        .card .date {
            color: #999;
            font-size: 0.9rem;
            font-style: italic;
        }

        /* Photography items - Direct image display with shadows */
        .photography-item {
            aspect-ratio: 3 / 2;
            overflow: hidden;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            transition: transform 0.4s ease, box-shadow 0.4s ease;
            cursor: pointer;
            background: white;
            position: relative;
        }
        
        @media (max-width: 768px) {
            .photography-item {
                margin: 0 auto 1.5rem auto;
                max-width: 90%;
                display: block;
            }
        }

        .photography-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
        }

        .photography-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            display: block;
            transition: transform 0.3s ease;
        }

        .photography-item:hover {
            transform: translateY(-12px) scale(1.03);
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.25);
        }

        .photography-item:hover::before {
            opacity: 1;
        }

        .photography-item:hover img {
            transform: scale(1.05);
        }

        /* CV Modal Viewer */
        .cv-modal {
            position: fixed;
            inset: 0;
            display: none;
            align-items: center;
            justify-content: center;
            background: rgba(10, 12, 24, 0.85);
            backdrop-filter: blur(4px);
            z-index: 2000;
            padding: 2rem;
        }
        .cv-modal.open { display: flex; }
        .cv-modal-content {
            position: relative;
            width: min(1000px, 95vw);
            height: min(90vh, 1200px);
            border-radius: 16px;
            background: transparent;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.45);
            border: none;
            overflow: hidden;
        }
        .cv-image-container {
            position: absolute;
            inset: 0;
            background: transparent;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: default;
            touch-action: none;
        }
        .cv-image-container.can-pan { cursor: grab; }
        .cv-image-container.dragging { cursor: grabbing; }
        #cvImage {
            max-width: none;
            width: auto;
            height: auto;
            transform: translate(0px, 0px) scale(1);
            transform-origin: center center;
            transition: transform 0.1s ease-out;
            user-select: none;
            -webkit-user-drag: none;
        }
        .cv-controls {
            position: absolute;
            bottom: 18px;
            left: 50%;
            transform: translateX(-50%);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.18);
            padding: 6px 10px;
            border-radius: 14px;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.45);
            backdrop-filter: blur(10px);
        }
        .cv-control-btn, .cv-download-btn {
            border: none;
            background: rgba(255, 255, 255, 0.15);
            color: #ffffff;
            width: 36px;
            height: 36px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.35);
            transition: transform 0.15s ease, background 0.15s ease;
        }
        .cv-control-btn:hover, .cv-download-btn:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 14px 26px rgba(0, 0, 0, 0.4);
        }
        
        .cv-close-btn:hover {
            background: rgba(255, 255, 255, 1);
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
        }
        .cv-download-btn svg { width: 18px; height: 18px; }
        .cv-close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 24px;
            line-height: 1;
            padding: 0;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            border: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 1000;
        }
        .cv-zoom-display { color: #fff; min-width: 50px; text-align: center; font-size: 0.9rem; opacity: 0.95; }

        /* Design Portfolio Carousel Styles */
        .design-carousel-wrapper {
            position: relative;
            overflow: hidden;
            max-width: 900px;
            margin: 2rem auto;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            touch-action: pan-y pinch-zoom;
        }
        
        @media (max-width: 768px) {
            .design-carousel-wrapper {
                max-width: 90%;
                margin: 1rem auto;
                border-radius: 16px;
            }
            
            .design-carousel-item {
                padding: 1rem;
                min-height: 180px;
            }
            
            .ig-content-placeholder {
                max-width: 280px;
                padding: 1.5rem 2rem;
                margin: 0 auto;
            }
            
            .ig-account-name {
                font-size: 1.4rem;
            }
        }

        .design-carousel-container {
            display: flex;
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            touch-action: pan-y pinch-zoom;
        }

        .design-carousel-item {
            flex: 0 0 100%;
            padding: 2rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            text-align: center;
            min-height: 280px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .ig-account-name {
            font-size: 1.8rem;
            font-weight: 600;
            background: linear-gradient(135deg, #ffc0d9, #ffd6a5);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .ig-content-placeholder {
            background: linear-gradient(135deg, #6663ff, #ac7ee9);
            padding: 2.5rem 3rem;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border: none;
            max-width: 400px;
            width: 100%;
            color: white;
            text-decoration: none;
            transition: transform 0.25s ease, box-shadow 0.25s ease;
        }

        .ig-content-placeholder p { color: rgba(255,255,255,0.9); font-size: 1rem; margin-bottom: 0; }

        .ig-content-placeholder p:last-child {
            margin-bottom: 0;
        }

        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid rgba(0, 0, 0, 0.1);
            width: 50px;
            height: 50px;
            cursor: pointer;
            z-index: 100;
            border-radius: 50%;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            color: #333;
            font-weight: bold;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }

        .carousel-btn:hover {
            background: white;
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            border-color: rgba(0, 0, 0, 0.2);
        }

        .carousel-btn:active {
            transform: translateY(-50%) scale(0.95);
        }

        .carousel-btn.prev {
            left: 15px;
        }

        .carousel-btn.next {
            right: 15px;
        }

        .carousel-indicators {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.95);
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ddd;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            transform: scale(1.2);
        }

        .indicator:hover {
            background: #999;
        }

        .ig-content-placeholder:hover { transform: translateY(-3px) scale(1.03); transition: transform 0.25s ease, box-shadow 0.25s ease; box-shadow: 0 15px 35px rgba(0,0,0,0.25); }


        /* Footer */
        footer {
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            color: white;
            text-align: center;
            padding: 4rem 0;
            margin-top: 3rem;
            position: relative;
            overflow: hidden;
        }

        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse"><path d="M 20 0 L 0 0 0 20" fill="none" stroke="rgba(255,255,255,0.05)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.5;
        }

        .contact-info {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.05) 100%);
            padding: 1rem 1.5rem;
            border-radius: 30px;
            backdrop-filter: blur(15px);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .contact-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .contact-item:hover {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0.15) 100%);
            transform: translateY(-3px) scale(1.02);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .contact-item:hover::before {
            left: 100%;
        }

        /* Make entire contact pill clickable when used as an anchor */
        a.contact-item {
            color: white;
            text-decoration: none;
            cursor: pointer;
        }
        a.contact-item:visited {
            color: white;
        }
        a.contact-item:focus-visible {
            outline: 2px solid rgba(255, 255, 255, 0.6);
            outline-offset: 2px;
        }

        /* Contact icons */
        .contact-icon {
            width: 22px;
            height: 22px;
            display: inline-block;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInFromLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInFromRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.8s ease-out;
        }

        .slide-in-left {
            animation: slideInFromLeft 0.8s ease-out;
        }

        .slide-in-right {
            animation: slideInFromRight 0.8s ease-out;
        }

        .scale-in {
            animation: scaleIn 0.8s ease-out;
        }

        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.8rem;
                letter-spacing: -0.01em;
            }
            
            .hero p {
                font-size: 1.3rem;
            }
            
            .nav-links {
                display: none;
            }
            
            .section {
                margin: 1rem 0;
                padding: 40px 20px;
                border-radius: 20px;
            }
            
            .contact-info {
                flex-direction: column;
                gap: 1rem;
            }

            nav {
                padding: 1.5rem 0;
            }

            .project-item { 
                flex-direction: column !important; 
                gap: 1.4rem; 
                text-align: center;
                align-items: center;
            }

            .project-image {
                min-height: 300px;
                max-height: 400px !important;
                order: -1;
            }

            .project-item:nth-child(1) .project-image,
            .project-item:nth-child(2) .project-image,
            .project-item:nth-child(3) .project-image {
                aspect-ratio: auto;
                height: 300px;
            }
            
            .project-content {
                order: 1;
                text-align: center;
            }

            .design-carousel-item {
                padding: 1.5rem 1rem;
                min-height: 250px;
            }

            .ig-account-title {
                font-size: 1.1rem;
                font-weight: 500;
                color: #555;
                margin-top: 0.5rem;
            }
            
            .carousel-btn {
                font-size: 1.2rem;
                padding: 0.8rem 1rem;
            }

            .carousel-btn.prev {
                left: 5px;
            }

            .carousel-btn.next {
                right: 5px;
            }
            
            .carousel-btn {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }

            .section h2 {
                font-size: 2.2rem;
            }

            .card {
                padding: 1.5rem;
                margin: 0 auto;
                max-width: 90%;
                text-align: center;
            }

            .project-content {
                padding: 2rem;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2.2rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }

            .cta-button {
                padding: 15px 30px;
                font-size: 1rem;
            }

            .section h2 {
                font-size: 1.8rem;
            }
        }

                /* Fix Design Carousel text & button spacing on small devices */
        @media (max-width: 480px) {
            .ig-content-placeholder {
                padding: 1.2rem 1.5rem; /* less padding so text fits */
                max-width: 90%;         /* allow it to fill more width */
            }
            .ig-account-name {
                font-size: 1.2rem;      /* smaller text so no wrapping issue */
            }
            .ig-account-title {
                font-size: 0.9rem;
            }
            .carousel-btn {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }
        }

        /* Fix work experience cards stacking on mobile */
        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr; /* single column */
            }
            .card {
                max-width: 100%;
            }
        }

        html {
            scroll-behavior: smooth;
        }
</style>
</head>
<body>
    <!-- Navigation -->
    <nav id="navbar">
        <div class="container">
            <div class="logo">WEI JIAN</div>
            <ul class="nav-links">
                <li><a onclick="scrollToSection('hero')">Home</a></li>
                <li><a onclick="scrollToSection('education')">Education & Projects</a></li>
                <li><a onclick="scrollToSection('experience')">Experience</a></li>
                <li><a onclick="scrollToSection('photography')">Photography</a></li>
                <li><a onclick="scrollToSection('design')">Design</a></li>
                <li><a onclick="scrollToSection('contact')">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="hero" class="hero">
        <div class="hero-content">
            <figure class="profile-portrait">
                <img src="https://github.com/Wi-Jan/portfolio-images/raw/main/Wei%20Jian.png" alt="Portrait of Wei Jian"/>
            </figure>
            <div class="hero-text">
                <h1>LOH WEI JIAN</h1>
                <p>Mechanical Engineering Student ‚Ä¢ Photographer ‚Ä¢ Designer</p>
                <a class="cta-button" href="#" onclick="openCvModal(); return false;">View My CV</a>
            </div>
        </div>
    </section>

    <div class="container">
        <!-- Combined Education & Projects Section -->
        <section id="education" class="section">
            <h2 class="animate-on-scroll fade-up">Education & Projects</h2>
            
            <!-- Education Header -->
            <div class="education-header animate-on-scroll scale">
                <h3>Bachelor of Mechanical Engineering</h3>
                <p>Currently in 3rd Year</p>
                <p>Universiti Malaya</p>
                <div class="date">2023 - Present</div>
            </div>

            <!-- Projects Container -->
            <div class="projects-container">
                <!-- Project 1 - Right Side -->
                <div class="project-item project-right animate-on-scroll fade-up">
                    <div class="project-content">
                        <h3>DESIGN ON SPUR GEAR SPEED REDUCER</h3>
                        <p>
                            Course: KIG2017 Design on Machine Elements<br>
                            Credited: Leong Xuan Yao, Lin Joon Qy, Loh Wei Jian, Leow Jing Bang & Joyce Eue
                        </p>
                        <div class="date">Year 2 Semester 2</div>
                    </div>
                    <div class="project-image">
                        <img src="https://github.com/Wi-Jan/portfolio-images/raw/main/Design%20of%20Spur%20Gear%20Speed%20Reducer.png" alt="Project 1 Poster">
                    </div>
                </div>

                <!-- Project 2 - Left Side -->
                <div class="project-item project-left animate-on-scroll fade-up">
                    <div class="project-content">
                        <h3>ICE-CAP MAPPING DRONES</h3>
                        <p>
                            Course: KIG2012 Mechatronic I<br>
                            Credited: Leow Jing Bang, Ng Xiu Li, Loh Wei Jian & Wan Aqif Danial
                        </p>
                        <div class="date">Year 2 Semester 1</div>
                    </div>
                    <div class="project-image">
                        <img src="https://github.com/Wi-Jan/portfolio-images/raw/main/MECHA%203.7.pdf.png" alt="Project 2 Poster">
                    </div>
                </div>

                <!-- Project 3 - Right Side -->
                <div class="project-item project-right animate-on-scroll fade-up">
                    <div class="project-content">
                        <h3>MOSQUARIUM</h3>
                        <p>
                            Course: KIG2016 Product Design & Innovation<br>
                            Credited: Tang Jun Jie, Wong Jiahon, Loh Wei Jian, Ng Xiu Li, Darius Loh, Cheah Zhan Sen
                        </p>
                        <div class="date">Year 2 Semester 1</div>
                    </div>
                    <div class="project-image">
                        <img src="https://github.com/Wi-Jan/portfolio-images/raw/main/MOSQUARIUM%20POSTER.png" alt="Project 3 Poster">
                    </div>
                </div>
            </div>
        </section>

        <!-- Experience Section -->
        <section id="experience" class="section">
            <h2 class="animate-on-scroll fade-up">Work Experience</h2>
            <div class="grid grid-2">
                <div class="card animate-on-scroll fade-left">
                    <h3>Part-Time Waiter</h3>
                    <p style="color: #8B0000;"><strong>De China Hot Pot</strong></p>
                    <p>Waiter & Cashier</p>
                    <div class="date">3 Months</div>
                </div>
                <div class="card animate-on-scroll fade-right">
                    <h3>Part-Time Tutor</h3>
                    <p style="color: #34699A;"><strong>KUMON</strong></p>
                    <p>Syllabus: KSSR KSSM IGCSE Mathematics, Additional Mathematics & English</p>
                    <div class="date">3 Months</div>
                </div>
            </div>
        </section>

        <!-- Photography Section -->
        <section id="photography" class="section">
            <h2 class="animate-on-scroll fade-up">Photography Portfolio</h2>
            <p style="text-align: center; margin-bottom: 2rem; color: #666;" class="animate-on-scroll fade-up">Hobbyist Photographer ‚Ä¢ Freelance Experience</p>
            <div class="grid grid-3">
                <div class="photography-item animate-on-scroll fade-left">
                    <img src="https://github.com/Wi-Jan/portfolio-images/raw/main/DSC_4948.jpg" alt="Photography 1">
                </div>
                <div class="photography-item animate-on-scroll fade-up">
                    <img src="https://github.com/Wi-Jan/portfolio-images/raw/main/61931CBB-6984-4C01-9FAC-E36FD29BF403.JPG" alt="Photography 2">
                </div>
                <div class="photography-item animate-on-scroll fade-right">
                    <img src="https://github.com/Wi-Jan/portfolio-images/raw/main/IMG_0037.JPG" alt="Photography 3">
                </div>
                <div class="photography-item animate-on-scroll fade-left">
                    <img src="https://github.com/Wi-Jan/portfolio-images/raw/main/2556554B-5D0D-4C0A-B2CA-5E36C0896EBC.JPG" alt="Photography 4">
                </div>
                <div class="photography-item animate-on-scroll fade-up">
                    <img src="https://github.com/Wi-Jan/portfolio-images/raw/main/IMG_0589.jpeg" alt="Photography 5">
                </div>
                <div class="photography-item animate-on-scroll fade-right">
                    <img src="https://github.com/Wi-Jan/portfolio-images/raw/main/IMG_0032.JPG" alt="Photography 6">
                </div>
            </div>
        </section>

        <!-- Design Section -->
        <section class="section" id="design">
            <h2 class="animate-on-scroll fade-up">Design Portfolio</h2>
            <p class="animate-on-scroll fade-up" style="text-align: center; margin-bottom: 2rem; color: #666;">2 Years of Creative &amp; Media Technical Work</p>

        <!-- Design Carousel -->
        <div class="design-carousel-wrapper animate-on-scroll fade-up">
            <button class="carousel-btn prev" id="designPrev" aria-label="Previous Slide">&lt;</button>
            <div class="design-carousel-container" id="designCarousel">

                <!-- Instagram Account 1 -->
                <div class="design-carousel-item">
                    <a href="https://www.instagram.com/esum_official" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
                        <div class="ig-content-placeholder">
                            <h3 class="ig-account-name">@esum_official</h3>
                            <p class="ig-account-title">Engineering Society of Universiti Malaya</p>
                        </div>
                    </a>
                </div>

                <!-- Instagram Account 2 -->
                <div class="design-carousel-item">
                    <a href="https://www.instagram.com/imecheum" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
                        <div class="ig-content-placeholder">
                            <h3 class="ig-account-name">@imecheum</h3>
                            <p class="ig-account-title">IMechE UM Student Chapter</p>
                        </div>
                    </a>
                </div>

                <!-- Instagram Account 3 -->
                <div class="design-carousel-item">
                    <a href="https://www.instagram.com/daxiang_um" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
                        <div class="ig-content-placeholder">
                            <h3 class="ig-account-name">@daxiang_um</h3>
                            <p class="ig-account-title">Persatuan Bahasa Cina Universiti Malaya (PBCUM) 19th Crosstalk Performance Night Committee</p>
                        </div>
                    </a>
                </div>

                <!-- Instagram Account 4 -->
                <div class="design-carousel-item">
                    <a href="https://www.instagram.com/um.technothon" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
                        <div class="ig-content-placeholder">
                            <h3 class="ig-account-name">@um.technothon</h3>
                            <p class="ig-account-title">UM Technothon 2025</p>
                        </div>
                    </a>
                </div>
            </div>
            
            <button class="carousel-btn next" id="designNext" aria-label="Next Slide">&gt;</button>

                <!-- Carousel Indicators -->
                <div class="carousel-indicators">
                    <span class="indicator active" data-slide="0"></span>
                    <span class="indicator" data-slide="1" role="button" tabindex="0" aria-label="Go to slide 2"></span>
                    <span class="indicator" data-slide="2"></span>
                    <span class="indicator" data-slide="3"></span>
                </div>
            </div>
        </section>
    </div>

    <!-- CV Modal Viewer -->
    <div id="cvModal" class="cv-modal" aria-hidden="true" role="dialog" aria-label="CV viewer">
        <div class="cv-modal-content" role="document">
            <button id="cvClose" class="cv-close-btn" aria-label="Close CV viewer">√ó</button>
            <div id="cvImageContainer" class="cv-image-container">
                <img id="cvImage" src="https://github.com/Wi-Jan/portfolio-images/raw/main/Loh%20Wei%20Jian%20CV.png" alt="Loh Wei Jian CV"/>
            </div>
            <div class="cv-controls">
                <button id="cvZoomOut" class="cv-control-btn" aria-label="Zoom out">‚àí</button>
                <span class="cv-zoom-display" id="cvZoomDisplay">100%</span>
                <button id="cvZoomIn" class="cv-control-btn" aria-label="Zoom in">+</button>
                <button id="cvDownload" class="cv-download-btn" title="Download image" aria-label="Download image">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M12 3v10" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
                        <path d="M8.5 10.5L12 14l3.5-3.5" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M4 16v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Footer/Contact -->
    <footer id="contact">
        <div class="container">
            <h2 style="color: white; margin-bottom: 2rem;">Get In Touch</h2>
            <div class="contact-info">
                <div class="contact-item">
                    <svg class="contact-icon icon-gmail" viewBox="0 0 24 24" aria-hidden="true">
                        <rect x="2" y="4" width="20" height="16" rx="3" fill="#ffffff" stroke="#EA4335" stroke-width="2"/>
                        <path d="M3 7l9 7 9-7" fill="none" stroke="#EA4335" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>weijianloh40@gmail.com</span>
                </div>
                <div class="contact-item">
                    <svg class="contact-icon icon-iphone" viewBox="0 0 24 24" aria-hidden="true">
                        <rect x="7" y="2.5" width="10" height="19" rx="3" fill="none" stroke="#ffffff" stroke-width="2"/>
                        <rect x="10.5" y="4" width="3" height="1.2" rx="0.6" fill="#ffffff"/>
                        <rect x="10" y="19.5" width="4" height="1.2" rx="0.6" fill="#ffffff"/>
                    </svg>
                    <span>+60 11-1857 3899</span>
                </div>
                    <div class="contact-item">
                        <span>üìç</span>
                        <span>Ipoh, Malaysia</span>
                </div>
                    <a class="contact-item contact-link" href="https://www.linkedin.com/in/weijian0227/" target="_blank" rel="noopener noreferrer" aria-label="Open LinkedIn profile (new tab)">
                        <svg class="contact-icon icon-linkedin" viewBox="0 0 24 24" aria-hidden="true">
                            <rect x="1.5" y="1.5" width="21" height="21" rx="3.5" fill="#0A66C2"/>
                            <text x="6.6" y="16.7" fill="#ffffff" font-family="Inter, Segoe UI, Arial, sans-serif" font-weight="700" font-size="11">in</text>
                        </svg>
                        <span>LinkedIn Profile</span>
                    </a>
                    <a class="contact-item contact-link" href="https://www.instagram.com/wei_jianloh/" target="_blank" rel="noopener noreferrer" aria-label="Open Instagram profile (new tab)">
                        <svg class="contact-icon icon-instagram" viewBox="0 0 24 24" aria-hidden="true">
                            <defs>
                                <linearGradient id="igGradient" x1="0" y1="0" x2="1" y2="1">
                                    <stop offset="0%" stop-color="#F58529"/>
                                    <stop offset="50%" stop-color="#DD2A7B"/>
                                    <stop offset="100%" stop-color="#515BD4"/>
                                </linearGradient>
                            </defs>
                            <rect x="1.5" y="1.5" width="21" height="21" rx="5" fill="url(#igGradient)"/>
                            <circle cx="12" cy="12" r="5" fill="none" stroke="#ffffff" stroke-width="2"/>
                            <circle cx="17.5" cy="6.5" r="1.5" fill="#ffffff"/>
                        </svg>
                        <span>Instagram: @wei_jianloh</span>
                    </a>
                </div>
            <p style="margin-top: 2rem; opacity: 0.7;">¬© 2025 WEI JIAN. All rights reserved.</p>
        </div>
    </footer>
    
    <script>
        // Smooth scroll function
        function scrollToSection(sectionId) {
            document.getElementById(sectionId).scrollIntoView({
                behavior: 'smooth'
            });
        }
        
        // CV Modal logic
        function openCvModal() {
            const modal = document.getElementById('cvModal');
            if (modal) {
                modal.classList.add('open');
                modal.setAttribute('aria-hidden', 'false');
                initializeCvInteractions();
            }
        }

        function closeCvModal() {
            const modal = document.getElementById('cvModal');
            if (modal) {
                modal.classList.remove('open');
                modal.setAttribute('aria-hidden', 'true');
            }
        }

        function initializeCvInteractions() {
            const container = document.getElementById('cvImageContainer');
            const img = document.getElementById('cvImage');
            const zoomInBtn = document.getElementById('cvZoomIn');
            const zoomOutBtn = document.getElementById('cvZoomOut');
            const downloadBtn = document.getElementById('cvDownload');
            const closeBtn = document.getElementById('cvClose');
            const zoomDisplay = document.getElementById('cvZoomDisplay');

            let scale = 1;
            let translateX = 0;
            let translateY = 0;
            let isDragging = false;
            let lastX = 0;
            let lastY = 0;
            let fitScale = 1; // computed to show full image

            // Fit image fully into container on open
            function fitToContain() {
                const containerRect = container.getBoundingClientRect();
                // Use natural size if available, otherwise current rendered size
                const naturalWidth = img.naturalWidth || img.width;
                const naturalHeight = img.naturalHeight || img.height;
                if (!naturalWidth || !naturalHeight) return;
                const scaleX = containerRect.width / naturalWidth;
                const scaleY = containerRect.height / naturalHeight;
                fitScale = Math.min(scaleX, scaleY);
                scale = fitScale;
                // Center image
                translateX = 0;
                translateY = 0;
            }

            function render() {
                img.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
                zoomDisplay.textContent = `${Math.round(scale * 100)}%`;
                // Enable panning cursor only when zoomed in beyond fit
                if (scale > fitScale * 1.02) {
                    container.classList.add('can-pan');
                } else {
                    container.classList.remove('can-pan');
                }
            }

            function clampScale(value) {
                return Math.min(fitScale * 3, Math.max(fitScale, value));
            }

            zoomInBtn.onclick = () => { scale = clampScale(scale * 1.2); render(); };
            zoomOutBtn.onclick = () => { 
                // Snap to fit
                fitToContain();
                scale = fitScale;
                translateX = 0; translateY = 0;
                render();
            };
            downloadBtn.onclick = () => {
                // Force image download
                const link = document.createElement('a');
                link.href = 'https://github.com/Wi-Jan/portfolio-images/raw/main/Loh%20Wei%20Jian%20CV.png';
                link.download = 'Loh_Wei_Jian_CV.png';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            };
            downloadBtn.onmouseenter = () => { downloadBtn.title = 'Download image'; };

            closeBtn.addEventListener('click', closeCvModal);

            // Click outside content to close
            document.getElementById('cvModal').addEventListener('click', (e) => {
                if (e.target.id === 'cvModal') closeCvModal();
            });

            // Drag to pan
            container.onmousedown = (e) => {
                if (!(scale > fitScale * 1.02)) return; // disable drag when at fit scale
                isDragging = true;
                container.classList.add('dragging');
                lastX = e.clientX;
                lastY = e.clientY;
            };
            window.onmouseup = () => {
                isDragging = false;
                container.classList.remove('dragging');
            };
            window.onmousemove = (e) => {
                if (!isDragging) return;
                translateX += e.clientX - lastX;
                translateY += e.clientY - lastY;
                lastX = e.clientX;
                lastY = e.clientY;
                constrainWithinBounds();
                render();
            };

            // Wheel zoom
            container.addEventListener('wheel', (e) => {
                e.preventDefault();
                const delta = e.deltaY < 0 ? 1.1 : 0.9;
                const prevScale = scale;
                scale = clampScale(scale * delta);
                // Keep image centered while zooming
                if (scale < prevScale) {
                    // On zoom out, nudge towards center
                    translateX *= scale / prevScale;
                    translateY *= scale / prevScale;
                }
                if (Math.abs(scale - fitScale) < 0.001) { translateX = 0; translateY = 0; }
                constrainWithinBounds();
                render();
            }, { passive: false });

            // Touch support
            let touchStartDist = 0;
            let startScale = 1;
            container.addEventListener('touchstart', (e) => {
                if (e.touches.length === 2) {
                    const dx = e.touches[0].clientX - e.touches[1].clientX;
                    const dy = e.touches[0].clientY - e.touches[1].clientY;
                    touchStartDist = Math.hypot(dx, dy);
                    startScale = scale;
                } else if (e.touches.length === 1 && scale > fitScale * 1.02) {
                    isDragging = true;
                    container.classList.add('dragging');
                    lastX = e.touches[0].clientX;
                    lastY = e.touches[0].clientY;
                }
            }, { passive: true });
            container.addEventListener('touchmove', (e) => {
                if (e.touches.length === 2) {
                    e.preventDefault();
                    const dx = e.touches[0].clientX - e.touches[1].clientX;
                    const dy = e.touches[0].clientY - e.touches[1].clientY;
                    const dist = Math.hypot(dx, dy);
                    scale = clampScale(startScale * (dist / touchStartDist));
                    constrainWithinBounds();
                    render();
                } else if (e.touches.length === 1 && isDragging) {
                    e.preventDefault();
                    translateX += e.touches[0].clientX - lastX;
                    translateY += e.touches[0].clientY - lastY;
                    lastX = e.touches[0].clientX;
                    lastY = e.touches[0].clientY;
                    constrainWithinBounds();
                    render();
                }
            }, { passive: false });
            
            function constrainWithinBounds() {
                // When zoomed in, constrain panning so image doesn't reveal background beyond container edge
                if (scale <= fitScale * 1.02) { translateX = 0; translateY = 0; return; }
                const cont = container.getBoundingClientRect();
                const natW = img.naturalWidth || img.width;
                const natH = img.naturalHeight || img.height;
                const scaledW = natW * scale;
                const scaledH = natH * scale;
                const halfVisibleW = cont.width / 2;
                const halfVisibleH = cont.height / 2;
                const halfImageW = scaledW / 2;
                const halfImageH = scaledH / 2;
                const maxX = Math.max(0, halfImageW - halfVisibleW);
                const maxY = Math.max(0, halfImageH - halfVisibleH);
                translateX = Math.min(maxX, Math.max(-maxX, translateX));
                translateY = Math.min(maxY, Math.max(-maxY, translateY));
            }
            container.addEventListener('touchend', () => {
                isDragging = false;
                container.classList.remove('dragging');
            });

            // Double click toggles between fit and 2x zoom
            container.addEventListener('dblclick', () => {
                if (scale <= fitScale * 1.05) {
                    scale = clampScale(fitScale * 2);
                } else {
                    scale = fitScale; translateX = 0; translateY = 0;
                }
                render();
            });

            // Recalculate on resize while modal is open
            const onResize = () => { const wasFit = Math.abs(scale - fitScale) < 0.001; fitToContain(); if (wasFit) { scale = fitScale; translateX = 0; translateY = 0; } render(); };
            window.addEventListener('resize', onResize);

            // Ensure image loaded before fitting
            const doInitialFit = () => { fitToContain(); render(); };
            if (img.complete && img.naturalWidth) { doInitialFit(); }
            else { img.addEventListener('load', doInitialFit, { once: true }); }
        }
        // Simple Intersection Observer for animations
        const animationObserver = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    entry.target.classList.remove('hidden');
                } else {
                    entry.target.classList.add('hidden');
                }
            });
        }, {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        });

        document.addEventListener('DOMContentLoaded', () => {
            // Apply animation observer
            const animatedElements = document.querySelectorAll('.animate-on-scroll');
            animatedElements.forEach(element => {
                animationObserver.observe(element);
                const rect = element.getBoundingClientRect();
                if (rect.top > window.innerHeight || rect.bottom < 0) {
                    element.classList.add('hidden');
                }
            });

            // Carousel logic
            const carousel = document.getElementById('designCarousel');
            const prevBtn = document.getElementById('designPrev');
            const nextBtn = document.getElementById('designNext');
            const indicators = document.querySelectorAll('.indicator');
            const totalSlides = document.querySelectorAll('.design-carousel-item').length;
            let currentIndex = 0;

            
            function updateCarousel(index) {
                carousel.style.transform = `translateX(${-index * 100}%)`;
                indicators.forEach((i, idx) => {
                    i.classList.toggle('active', idx === index);
                });
            }

            prevBtn.addEventListener('click', () => {
                currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
                updateCarousel(currentIndex);
            });

            nextBtn.addEventListener('click', () => {
                currentIndex = (currentIndex + 1) % totalSlides;
                updateCarousel(currentIndex);
            });

            indicators.forEach(indicator => {
                indicator.addEventListener('click', () => {
                    currentIndex = parseInt(indicator.dataset.slide);
                    updateCarousel(currentIndex);
                });
            });

            // Enhanced mobile swipe gesture
            let startX = 0;
            let startY = 0;
            let isDragging = false;
            
            carousel.addEventListener('touchstart', e => {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
                isDragging = true;
            }, { passive: true });

            carousel.addEventListener('touchmove', e => {
                if (!isDragging) return;
                const currentX = e.touches[0].clientX;
                const currentY = e.touches[0].clientY;
                const deltaX = Math.abs(currentX - startX);
                const deltaY = Math.abs(currentY - startY);
                
                // Prevent vertical scrolling if horizontal swipe is detected
                if (deltaX > deltaY && deltaX > 10) {
                    e.preventDefault();
                }
            }, { passive: false });

            carousel.addEventListener('touchend', e => {
                if (!isDragging) return;
                const endX = e.changedTouches[0].clientX;
                const endY = e.changedTouches[0].clientY;
                const deltaX = Math.abs(endX - startX);
                const deltaY = Math.abs(endY - startY);
                
                // More sensitive swipe detection for mobile
                if (deltaX > 20 && deltaX > deltaY) {
                    if (startX - endX > 20) nextBtn.click(); // swipe left
                    if (endX - startX > 20) prevBtn.click(); // swipe right
                }
                isDragging = false;
            }, { passive: true });

            // Init first load
            updateCarousel(currentIndex);
            
            // Additional touch handling for better mobile support
            const wrapper = document.querySelector('.design-carousel-wrapper');
            wrapper.addEventListener('touchstart', e => {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
                isDragging = true;
            }, { passive: true });

            wrapper.addEventListener('touchend', e => {
                if (!isDragging) return;
                const endX = e.changedTouches[0].clientX;
                const endY = e.changedTouches[0].clientY;
                const deltaX = Math.abs(endX - startX);
                const deltaY = Math.abs(endY - startY);
                
                // Very sensitive swipe detection
                if (deltaX > 15 && deltaX > deltaY) {
                    if (startX - endX > 15) nextBtn.click(); // swipe left
                    if (endX - startX > 15) prevBtn.click(); // swipe right
                }
                isDragging = false;
            }, { passive: true });
            });

            // Enhanced navigation behavior
            let lastScrollTop = 0;
            const navbar = document.getElementById('navbar');
            const scrollThreshold = 100;
            const hideThreshold = 200;
            let isNavbarHidden = false;
            
            function updateNav() {
                const currentScroll = window.pageYOffset || document.documentElement.scrollTop;
                
                if (currentScroll > scrollThreshold) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
                
                if (currentScroll > hideThreshold) {
                    if (currentScroll > lastScrollTop + 5 && !isNavbarHidden) {
                        navbar.classList.add('nav-hidden');
                        isNavbarHidden = true;
                    } else if (currentScroll < lastScrollTop - 5 && isNavbarHidden) {
                        navbar.classList.remove('nav-hidden');
                        isNavbarHidden = false;
                    }
                } else {
                    if (isNavbarHidden) {
                        navbar.classList.remove('nav-hidden');
                        isNavbarHidden = false;
                    }
                }
                
                lastScrollTop = currentScroll <= 0 ? 0 : currentScroll;
            }
            
            // Throttled scroll event
            let ticking = false;
            window.addEventListener('scroll', () => {
                if (!ticking) {
                    requestAnimationFrame(() => {
                        updateNav();
                        ticking = false;
                    });
                    ticking = true;
                }
            });

            // Add parallax effect to hero
            window.addEventListener('scroll', () => {
                const scrolled = window.pageYOffset;
                const hero = document.querySelector('.hero');
                const rate = scrolled * -0.5;
                hero.style.transform = `translateY(${rate}px)`;
        });
    
    document.addEventListener("DOMContentLoaded", function () {
        const carousel = document.getElementById('designCarousel');
        const prevBtn = document.getElementById('designPrev');
        const nextBtn = document.getElementById('designNext');
        const indicators = document.querySelectorAll('.indicator');

        const totalSlides = document.querySelectorAll('.design-carousel-item').length;
        let currentIndex = 0;

        function updateCarousel(index) {
            const offset = -index * 100;
            carousel.style.transform = `translateX(${offset}%)`;
            indicators.forEach(indicator => indicator.classList.remove('active'));
            if (indicators[index]) {
                indicators[index].classList.add('active');
            }
        }

        prevBtn.addEventListener('click', () => {
            currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
            updateCarousel(currentIndex);
        });

        nextBtn.addEventListener('click', () => {
            currentIndex = (currentIndex + 1) % totalSlides;
            updateCarousel(currentIndex);
        });

        indicators.forEach(indicator => {
            indicator.addEventListener('click', () => {
                currentIndex = parseInt(indicator.dataset.slide);
                updateCarousel(currentIndex);
            });
        });

        // Initial load
        updateCarousel(currentIndex);
    });
</script>

</body>
</html>
